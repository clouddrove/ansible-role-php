- name: epel-release
  yum: 
    name: epel-release 
    state: installed

- name: Add repository 'remi-repo'
  command: rpm -ih http://rpms.famillecollet.com/enterprise/remi-release-7.rpm creates=/etc/yum.repos.d/remi.repo

- name: install php74
  yum: name={{ item }} enablerepo=epel,remi,remi-php{{ centos_php_version }} state=installed
  with_items:
    - php{{ centos_php_version }}
    - php{{ centos_php_version }}-php-mcrypt
    - php{{ centos_php_version }}-php-mbstring
    - php{{ centos_php_version }}-php-fpm
    - php{{ centos_php_version }}-php-gd
    - php{{ centos_php_version }}-php-xml
    - php{{ centos_php_version }}-php-pdo
    - php{{ centos_php_version }}-php-zip

- name : link env file
  command: ln -s /opt/remi/php{{ centos_php_version }}/enable /etc/profile.d/php{{ centos_php_version }}.sh creates=/etc/profile.d/php{{ centos_php_version }}.sh